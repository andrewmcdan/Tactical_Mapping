name: Build on Commit
on:
  push:
    branches: [ "main" ]
    paths: [ "FeatherM0_RFM9x/*" ]
  pull_request:
    branches: [ "main" ]
    paths: [ "FeatherM0_RFM9x/*" ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    - name: Compile Arduino Sketches
      uses: arduino/compile-sketches@v1.1.0
      with:
        platforms: |
          - name: "adafruit:samd"
            source-url: "https://adafruit.github.io/arduino-board-index/package_adafruit_index.json"
        fqbn: adafruit:samd:adafruit_feather_m0
        libraries: |
          - name: "RadioHead"
        verbose: true
        enable-warnings-report: true
        sketch-paths: |
          - FeatherM0_RFM9x
        sketches-report-path: sketches-reports
        enable-deltas-report: true
        github-token: ${{ secrets.GITHUBTOKEN }}
